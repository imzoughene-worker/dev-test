<kendo-tilelayout
  class="min-h-[80vh]"
  [resizable]="editMode"
  [reorderable]="editMode"
  [rowHeight]="'282px'"
  [columns]="12"
  [autoFlow]="'row'">
  @if (isExterne && (editMode || !hide[4].getValue())) {
    <kendo-tilelayout-item
      [colSpan]="7">
      @if ({ text: 'TOTAL DES DOSSIERS REÇUS' }; as header) {
        <kendo-tilelayout-item-header
          class="flex justify-between items-center">
          {{ header.text }}
          @if (!editMode) {
            <button
              kendoButton
              [svgIcon]="fullscreenIcon"
              (click)="expandCard(graph5.dataContainer, header.text)"></button>
          }
        </kendo-tilelayout-item-header>
      }
      <kendo-tilelayout-item-body>
        @if (editMode) {
          <button
            kendoButton
            style="position: absolute; top: 8px; right: 16px; z-index: 10"
            [iconClass]="hide[4].getValue() ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"
            (click)="hide[4].next(!hide[4].getValue())"
          >
            {{ hide[4].getValue() ? 'Afficher' : 'Masquer' }}
          </button>
        }
        <portals-metric-chart
          #graph5
          [data]="totalDossierRecuMetric"
          [isLoading]="totalDossierRecuIsLoading">
        </portals-metric-chart>
      </kendo-tilelayout-item-body>
    </kendo-tilelayout-item>
  }
  @if (!isExterne && (editMode || hide[2].getValue() === false)) {
    <kendo-tilelayout-item
      [colSpan]="7">
      @if ({ text: 'TOTAL DES DOSSIERS REÇUS' }; as header) {
        <kendo-tilelayout-item-header
          class="flex justify-between items-center">
          {{ header.text }}
          @if (!editMode) {
            <button
              kendoButton
              [svgIcon]="fullscreenIcon"
              (click)="expandCard(graph3.dataContainer!, header.text)"></button>
          }
        </kendo-tilelayout-item-header>
      }
      <kendo-tilelayout-item-body>
        @if (editMode) {
          <button
            kendoButton
            style="position: absolute; top: 8px; right: 16px; z-index: 10"
            [iconClass]="hide[2].getValue() ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"
            (click)="hide[2].next(!hide[2].getValue())"
          >
            {{ hide[2].getValue() ? 'Afficher' : 'Masquer' }}
          </button>
        }
        <portals-metric-chart
          #graph3
          [data]="totalDossierRecuMetric"
          [isLoading]="totalDossierRecuIsLoading">
        </portals-metric-chart>
      </kendo-tilelayout-item-body>
    </kendo-tilelayout-item>
  }
  @if (editMode || !hide[3].getValue()) {
    <kendo-tilelayout-item
      [colSpan]="5">
      @if ({ text: 'TOTAL DOSSIERS SAISIS' }; as header) {
        <kendo-tilelayout-item-header
          class="flex justify-between items-center">
          {{ header.text }}
          @if (!editMode) {
            <button
              kendoButton
              [svgIcon]="fullscreenIcon"
              (click)="expandCard(graph4.dataContainer!, header.text)"></button>
          }
        </kendo-tilelayout-item-header>
      }
      <kendo-tilelayout-item-body>
        @if (editMode) {
          <button
            kendoButton
            style="position: absolute; top: 8px; right: 16px; z-index: 10"
            [iconClass]="hide[3].getValue() ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"
            (click)="hide[3].next(!hide[3].getValue())"
          >
            {{ hide[3].getValue() ? 'Afficher' : 'Masquer' }}
          </button>
        }
        <portals-metric-chart
          #graph4
          [data]="totalDossierSaisiMetric"
          [isLoading]="totalDossierSaisiIsLoading">
        </portals-metric-chart>
      </kendo-tilelayout-item-body>
    </kendo-tilelayout-item>
  }
  @if (editMode || hide[5].getValue() === false) {
    <kendo-tilelayout-item
      [colSpan]="5">
      @if ({ text: 'TAUX CLOTURE LOT SINISTRE' }; as header) {
        <kendo-tilelayout-item-header
          class="flex justify-between items-center">
          {{ header.text }}
          @if (!editMode) {
            <button
              kendoButton
              [svgIcon]="fullscreenIcon"
              (click)="expandCard(graph6.dataContainer, header.text)"></button>
          }
        </kendo-tilelayout-item-header>
      }
      <kendo-tilelayout-item-body>
        @if (editMode) {
          <button
            kendoButton
            style="position: absolute; top: 8px; right: 16px; z-index: 10"
            [iconClass]="hide[5].getValue() ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"
            (click)="hide[5].next(!hide[5].getValue())"
          >
            {{ hide[5].getValue() ? 'Afficher' : 'Masquer' }}
          </button>
        }
        <portals-gauge-chart
          #graph6
          type="arc"
          [data]="tauxClotureLotSinistreMetric"
          [isLoading]="tauxClotureLotSinistreIsLoading">
        </portals-gauge-chart>
      </kendo-tilelayout-item-body>
    </kendo-tilelayout-item>
  }
  @if (editMode || hide[6].getValue() === false) {
    <kendo-tilelayout-item
      [colSpan]="7">
      @if ({ text: 'TAUX DE REMBOURSEMENT MOYEN' }; as header) {
        <kendo-tilelayout-item-header
          class="flex justify-between items-center">
          {{ header.text }}
          @if (!editMode) {
            <button
              kendoButton
              [svgIcon]="fullscreenIcon"
              (click)="expandCard(graph7.dataContainer, header.text)"></button>
          }
        </kendo-tilelayout-item-header>
      }
      <kendo-tilelayout-item-body>
        @if (editMode) {
          <button
            kendoButton
            style="position: absolute; top: 8px; right: 16px; z-index: 10"
            [iconClass]="hide[6].getValue() ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"
            (click)="hide[6].next(!hide[6].getValue())"
          >
            {{ hide[6].getValue() ? 'Afficher' : 'Masquer' }}
          </button>
        }
        <portals-gauge-chart
          #graph7
          type="arc"
          [data]="tauxRemboursementMoyenMetric"
          [isLoading]="tauxRemboursementMoyenIsLoading">
        </portals-gauge-chart>
      </kendo-tilelayout-item-body>
    </kendo-tilelayout-item>
  }
  @if (editMode || hide[7].getValue() === false) {
    <kendo-tilelayout-item
      [colSpan]="12"
      [rowSpan]="2">
      @if ({ text: 'SUIVI ETAT DOSSIER' }; as header) {
        <kendo-tilelayout-item-header
          class="flex justify-between items-center">
          {{ header.text }}
          @if (!editMode) {
            <button
              kendoButton
              [svgIcon]="fullscreenIcon"
              (click)="expandCard(graph8?.dataContainer, header.text)"></button>
          }
        </kendo-tilelayout-item-header>
      }
      <kendo-tilelayout-item-body>
        @if (editMode) {
          <button
            kendoButton
            style="position: absolute; top: 8px; right: 16px; z-index: 10"
            [iconClass]="hide[7].getValue() ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"
            (click)="hide[7].next(!hide[7].getValue())"
          >
            {{ hide[7].getValue() ? 'Afficher' : 'Masquer' }}
          </button>
        }
        <portals-graph-chart
          #graph8
          type="bar"
          [data]="appMode()?.isCourtierMode && isExterne ? suiviEtatClientDossierGraph : suiviEtatDossierGraph"
          [isLoading]="appMode()?.isCourtierMode && isExterne ? suiviEtatClientDossierIsLoading : suiviEtatDossierIsLoading"></portals-graph-chart>
      </kendo-tilelayout-item-body>
    </kendo-tilelayout-item>
  }
  @if (appMode()?.isCourtierMode && (!isExterne && (editMode || hide[0].getValue() === false))) {
    <kendo-tilelayout-item
      [colSpan]="12">
      @if ({ text: 'COMPAGNIE' }; as header) {
        <kendo-tilelayout-item-header
          class="flex justify-between items-center">
          {{ header.text }}
          @if (!editMode) {
            <button
              kendoButton
              [svgIcon]="fullscreenIcon"
              (click)="expandCard(graph1.dataContainer!, header.text)"></button>
          }
        </kendo-tilelayout-item-header>
      }
      <kendo-tilelayout-item-body>
        @if (editMode) {
          <button
            kendoButton
            style="position: absolute; top: 8px; right: 16px; z-index: 10"
            [iconClass]="hide[0].getValue() ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"
            (click)="hide[0].next(!hide[0].getValue())"
          >
            {{ hide[0].getValue() ? 'Afficher' : 'Masquer' }}
          </button>
        }
        <portals-display-chart
          #graph1
          [data]="companiesText"
          [isLoading]="companiesIsLoading"
          title="">
        </portals-display-chart>
      </kendo-tilelayout-item-body>
    </kendo-tilelayout-item>
  }
  @if (isExterne && (editMode || hide[1].getValue() === false)) {
    <kendo-tilelayout-item
      [colSpan]="12">
      @if ({ text: 'COMPAGNIE' }; as header) {
        <kendo-tilelayout-item-header
          class="flex justify-between items-center">
          {{ header.text }}
          @if (!editMode) {
            <button
              kendoButton
              [svgIcon]="fullscreenIcon"
              (click)="expandCard(graph2.dataContainer!, header.text)"></button>
          }
        </kendo-tilelayout-item-header>
      }
      <kendo-tilelayout-item-body>
        @if (editMode) {
          <button
            kendoButton
            style="position: absolute; top: 8px; right: 16px; z-index: 10"
            [iconClass]="hide[1].getValue() ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"
            (click)="hide[1].next(!hide[1].getValue())"
          >
            {{ hide[1].getValue() ? 'Afficher' : 'Masquer' }}
          </button>
        }
        <portals-display-chart
          #graph2
          [data]="companiesText"
          [isLoading]="companiesIsLoading">
        </portals-display-chart>
      </kendo-tilelayout-item-body>
    </kendo-tilelayout-item>
  }
</kendo-tilelayout>
