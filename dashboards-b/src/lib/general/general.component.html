<div class="flex flex-row flex-wrap">
  <div class="flex flex-100 max-w-full">
    <kendo-card width="100%">
      <kendo-card-body>
        <h4>Total feuilles de soin par Status</h4>
        @if (FeuilleDeSoinCountStatusLoading | async) {
          <kendo-progressbar
            [indeterminate]="true"
          ></kendo-progressbar>
        }
        @if (!(FeuilleDeSoinCountStatusLoading | async) && FeuilleDeSoinCountStatus; as urcs) {
          <div
            class="flex flex-row flex-wrap"
            >
            <ng-container>
              <div class="flex flex-100 max-w-full md:flex-1/3 md:max-w-[33%]">
                <kendo-card width="100%">
                  <kendo-card-body>
                    <div class="d-flex no-block">
                      <div class="m-r-10 no-shrink">
                        <button
                          kendoButton
                          rounded="full"
                          [themeColor]="'primary'"
                          class="shadow-none">
                          <span class="k-icon k-font-icon k-i-rotate"></span>
                        </button>
                      </div>
                      <div>
                        <h3 class="m-0">{{ urcs.inProgress }}</h3>
                        <h6 class="text-muted m-0">En cours</h6>
                      </div>
                    </div>
                  </kendo-card-body>
                </kendo-card>
              </div>
              <div class="flex flex-100 max-w-full md:flex-1/3 md:max-w-[33%]">
                <kendo-card width="100%">
                  <kendo-card-body>
                    <div class="d-flex no-block">
                      <div class="m-r-10 no-shrink">
                        <button
                          kendoButton
                          rounded="full"
                          class="shadow-none bg-inverse bg-success">
                          <span class="k-icon k-font-icon k-i-check-outline"></span>
                        </button>
                      </div>
                      <div>
                        <h3 class="m-0">{{ urcs.refund }}</h3>
                        <h6 class="text-muted m-0">Remboursé</h6>
                      </div>
                    </div>
                  </kendo-card-body>
                </kendo-card>
              </div>
              <div class="flex flex-100 max-w-full md:flex-1/3 md:max-w-[33%]">
                <kendo-card width="100%">
                  <kendo-card-body>
                    <div class="d-flex no-block">
                      <div class="m-r-10 no-shrink">
                        <button
                          kendoButton
                          rounded="full"
                          [themeColor]="'warning'"
                          class="shadow-none bg-danger">
                          <span class="k-icon k-font-icon k-i-cancel"></span>
                        </button>
                      </div>
                      <div>
                        <h3 class="m-0">{{ urcs.refused }}</h3>
                        <h6 class="text-muted m-0">Refusé</h6>
                      </div>
                    </div>
                  </kendo-card-body>
                </kendo-card>
              </div>
            </ng-container>
          </div>
        }
      </kendo-card-body>
    </kendo-card>
  </div>
</div>
<div class="flex flex-row flex-wrap">
  <div class="flex flex-100 max-w-full">
    <kendo-card width="100%">
      <kendo-card-body>
        <h4>Total des feuilles de soins par type</h4>
        @if (TypeDeSoinCountLoading | async) {
          <kendo-progressbar
            [indeterminate]="true"
          ></kendo-progressbar>
        }
        @if (!(TypeDeSoinCountLoading | async) && TypeDeSoinCount; as urcs) {
          <div
            class="flex flex-row flex-wrap"
            >
            <ng-container>
              <div class="flex flex-100 max-w-full md:flex-1/3 md:max-w-[33%]">
                <kendo-card width="100%">
                  <kendo-card-body>
                    <div class="d-flex no-block">
                      <div class="m-r-10 no-shrink">
                        <button
                          kendoButton
                          rounded="full"
                          [themeColor]="'primary'"
                          class="shadow-none">
                          <i class="fa-solid fa-suitcase-medical"></i>
                        </button>
                      </div>
                      <div>
                        <h3 class="m-0">{{ urcs.maladie }}</h3>
                        <h6 class="text-muted m-0">Maladie</h6>
                      </div>
                    </div>
                  </kendo-card-body>
                </kendo-card>
              </div>
              <div class="flex flex-100 max-w-full md:flex-1/3 md:max-w-[33%]">
                <kendo-card width="100%">
                  <kendo-card-body>
                    <div class="d-flex no-block">
                      <div class="m-r-10 no-shrink">
                        <button
                          kendoButton
                          rounded="full"
                          class="shadow-none bg-inverse bg-success">
                          <i class="fa-solid fa-wrench"></i>
                        </button>
                      </div>
                      <div>
                        <h3 class="m-0">{{ urcs.dentaire }}</h3>
                        <h6 class="text-muted m-0">Dentaire</h6>
                      </div>
                    </div>
                  </kendo-card-body>
                </kendo-card>
              </div>
              <div class="flex flex-100 max-w-full md:flex-1/3 md:max-w-[33%]">
                <kendo-card width="100%">
                  <kendo-card-body>
                    <div class="d-flex no-block">
                      <div class="m-r-10 no-shrink">
                        <button
                          kendoButton
                          rounded="full"
                          [themeColor]="'warning'"
                          class="shadow-none bg-danger">
                          <span class="k-icon k-font-icon k-i-eye"></span>
                        </button>
                      </div>
                      <div>
                        <h3 class="m-0">{{ urcs.ophtalmologieOptique }}</h3>
                        <h6 class="text-muted m-0">Ophtalmologie/Optique</h6>
                      </div>
                    </div>
                  </kendo-card-body>
                </kendo-card>
              </div>
            </ng-container>
          </div>
        }
      </kendo-card-body>
    </kendo-card>
  </div>
</div>

<div class="flex flex-row flex-wrap">
  <div class="flex flex-100 max-w-full">
    <kendo-card width="100%">
      <kendo-card-body>
        @if (FeuilleDeSoinTimelineLoading | async) {
          <kendo-progressbar
            [indeterminate]="true"
          ></kendo-progressbar>
        }
        @if (!(FeuilleDeSoinTimelineLoading | async) && FeuilleDeSoinTimeline; as apc) {
          <div
            class="flex flex-100 max-w-full"
            >
            <kendo-chart
              class="w-full"
              renderAs="canvas"
              [pannable]="{ lock: 'y' }"
              [zoomable]="{ mousewheel: { lock: 'y' } }">
              <kendo-chart-category-axis>
                <kendo-chart-category-axis-item
                  [min]="apc.seuilDebutAffichage"
                  [labels]="{ rotation: 'auto' }"
                  [categories]="apc.categories"
                  [title]="{ text: apc.categoryName }">
                  <kendo-chart-category-axis-item-crosshair>
                    <kendo-chart-category-axis-item-crosshair-tooltip></kendo-chart-category-axis-item-crosshair-tooltip>
                  </kendo-chart-category-axis-item-crosshair>
                </kendo-chart-category-axis-item>
              </kendo-chart-category-axis>
              <kendo-chart-value-axis>
                <kendo-chart-value-axis-item
                [crosshair]="{
                  visible: true,
                  tooltip: { visible: true, format: '#.##' }
                }"></kendo-chart-value-axis-item>
              </kendo-chart-value-axis>
              <kendo-chart-series>
                @for (serie of apc.series; track serie) {
                  <kendo-chart-series-item
                    type="line"
                    [data]="serie.data"
                    [name]="serie.title">
                    <kendo-chart-series-item-tooltip>
                      <ng-template
                        let-value="value"
                        let-category="category">
                        {{ serie.title }} ({{ value }}) le Le {{ category }}
                      </ng-template>
                    </kendo-chart-series-item-tooltip>
                  </kendo-chart-series-item>
                }
              </kendo-chart-series>
              <kendo-chart-title [text]="apc.title"></kendo-chart-title>
              <kendo-chart-legend
                position="bottom"
              orientation="horizontal"></kendo-chart-legend>
            </kendo-chart>
          </div>
        }
      </kendo-card-body>
    </kendo-card>
  </div>
</div>

<div class="flex flex-row flex-wrap">
  <div class="flex flex-100 max-w-full">
    <kendo-card width="100%">
      <kendo-card-body>
        <h4>Total des reclamations par status</h4>
        @if (ReclamationCountStatusLoading | async) {
          <kendo-progressbar
            [indeterminate]="true"
          ></kendo-progressbar>
        }
        @if (!(ReclamationCountStatusLoading | async) && ReclamationCountStatus; as urcs) {
          <div
            class="flex flex-row flex-wrap"
            >
            <ng-container>
              <div class="flex flex-100 max-w-full md:flex-1/3 md:max-w-[33%]">
                <kendo-card width="100%">
                  <kendo-card-body>
                    <div class="d-flex no-block">
                      <div class="m-r-10 no-shrink">
                        <button
                          kendoButton
                          rounded="full"
                          [themeColor]="'primary'"
                          class="shadow-none">
                          <i class="fa-solid fa-pause"></i>
                        </button>
                      </div>
                      <div>
                        <h3 class="m-0">{{ urcs.enCours }}</h3>
                        <h6 class="text-muted m-0">En cours</h6>
                      </div>
                    </div>
                  </kendo-card-body>
                </kendo-card>
              </div>
              <div class="flex flex-100 max-w-full md:flex-1/3 md:max-w-[33%]">
                <kendo-card width="100%">
                  <kendo-card-body>
                    <div class="d-flex no-block">
                      <div class="m-r-10 no-shrink">
                        <button
                          kendoButton
                          rounded="full"
                          class="shadow-none bg-inverse bg-success">
                          <span class="k-icon k-font-icon k-i-check-outline"></span>
                        </button>
                      </div>
                      <div>
                        <h3 class="m-0">{{ urcs.avecSucces }}</h3>
                        <h6 class="text-muted m-0">Cloture avec succes</h6>
                      </div>
                    </div>
                  </kendo-card-body>
                </kendo-card>
              </div>
              <div class="flex flex-100 max-w-full md:flex-1/3 md:max-w-[33%]">
                <kendo-card width="100%">
                  <kendo-card-body>
                    <div class="d-flex no-block">
                      <div class="m-r-10 no-shrink">
                        <button
                          kendoButton
                          rounded="full"
                          [themeColor]="'warning'"
                          class="shadow-none bg-danger">
                          <i class="fa-solid fa-block"></i>
                        </button>
                      </div>
                      <div>
                        <h3 class="m-0">{{ urcs.avecEchec }}</h3>
                        <h6 class="text-muted m-0">Cloture avec echec</h6>
                      </div>
                    </div>
                  </kendo-card-body>
                </kendo-card>
              </div>
            </ng-container>
          </div>
        }
      </kendo-card-body>
    </kendo-card>
  </div>
</div>

<div class="flex flex-row flex-wrap">
  <div class="flex flex-100 max-w-full">
    <kendo-card width="100%">
      <kendo-card-body>
        @if (ReclamationTimelineLoading | async) {
          <kendo-progressbar
            [indeterminate]="true"
          ></kendo-progressbar>
        }

        @if (!(ReclamationTimelineLoading | async) && ReclamationTimeline; as apc) {
          <div
            class="flex flex-100 max-w-full"
            >
            <kendo-chart
              class="w-full"
              renderAs="canvas"
              [pannable]="{ lock: 'y' }"
              [zoomable]="{ mousewheel: { lock: 'y' } }">
              <kendo-chart-category-axis>
                <kendo-chart-category-axis-item
                  [min]="apc.seuilDebutAffichage"
                  [labels]="{ rotation: 'auto' }"
                  [categories]="apc.categories"
                  [title]="{ text: apc.categoryName }">
                  <kendo-chart-category-axis-item-crosshair>
                    <kendo-chart-category-axis-item-crosshair-tooltip></kendo-chart-category-axis-item-crosshair-tooltip>
                  </kendo-chart-category-axis-item-crosshair>
                </kendo-chart-category-axis-item>
              </kendo-chart-category-axis>
              <kendo-chart-value-axis>
                <kendo-chart-value-axis-item
                [crosshair]="{
                  visible: true,
                  tooltip: { visible: true, format: '#.##' }
                }"></kendo-chart-value-axis-item>
              </kendo-chart-value-axis>
              <kendo-chart-series>
                @for (serie of apc.series; track serie) {
                  <kendo-chart-series-item
                    type="line"
                    [data]="serie.data"
                    [name]="serie.title">
                    <kendo-chart-series-item-tooltip>
                      <ng-template
                        let-value="value"
                        let-category="category">
                        {{ serie.title }} ({{ value }}) le Le {{ category }}
                      </ng-template>
                    </kendo-chart-series-item-tooltip>
                  </kendo-chart-series-item>
                }
              </kendo-chart-series>
              <kendo-chart-title [text]="apc.title"></kendo-chart-title>
              <kendo-chart-legend
                position="bottom"
              orientation="horizontal"></kendo-chart-legend>
            </kendo-chart>
          </div>
        }
      </kendo-card-body>
    </kendo-card>
  </div>
</div>
