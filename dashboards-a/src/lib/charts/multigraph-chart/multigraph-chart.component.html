<ng-container *ngTemplateOutlet="dataContainer"></ng-container>

<ng-template #dataContainer>
  @if (data != null) {
    @if (isLoading) {
      <kendo-progressbar
        [indeterminate]="true"
      ></kendo-progressbar>
    }
    <div class="h-full w-full">
      <kendo-chart class="w-full h-full">
        <kendo-chart-category-axis>
          <kendo-chart-category-axis-item [categories]="data.categories ?? []"></kendo-chart-category-axis-item>
        </kendo-chart-category-axis>
        <kendo-chart-series>
          @for (s of data.series; track s) {
            <kendo-chart-series-item
              type="bar"
              [stack]="{ group: 'a' }"
              [data]="s.values"
              [name]="s.name">
              <kendo-chart-series-item-tooltip>
                <ng-template
                  let-value="value"
                  let-category="category">
                  {{ s.name }} - {{ category }} : ({{ value }})
                </ng-template>
              </kendo-chart-series-item-tooltip>
              <kendo-chart-series-item-labels>
                <ng-template
                  let-value="value"
                  let-category="category">
                  {{ s.name }} - {{ category }} : ({{ value }})
                </ng-template>
              </kendo-chart-series-item-labels>
            </kendo-chart-series-item>
          }
        </kendo-chart-series>
      </kendo-chart>
    </div>
  }
  @if (data == null) {
    @if (data == null) {
      <p
        class="valeur-viz">
        N/A
      </p>
    }
  }
</ng-template>
