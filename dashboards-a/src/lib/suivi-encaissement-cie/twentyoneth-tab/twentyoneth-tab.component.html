<kendo-tilelayout class="costumize_full_grid"
  [resizable]="editMode"
  [reorderable]="editMode"
  [rowHeight]="'282px'"
  [columns]="7"
  [autoFlow]="'row'">
  <kendo-tilelayout-item class="costumize_full_grid"
    [colSpan]="7"
    [rowSpan]="2">
    <kendo-tilelayout-item-header> DETAIL ENCAISSEMENTS CIE</kendo-tilelayout-item-header>
    <kendo-tilelayout-item-body kendoRippleContainer>
      @if (editMode) {
      <button
        kendoButton
        style="position: absolute; top: 8px; right: 16px; z-index: 10"
        [iconClass]="hide[0].getValue() ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"
        (click)="hide[0].next(!hide[0].getValue())">
        {{ hide[0].getValue() ? 'Afficher' : 'Masquer' }}
      </button>
      }
      <kendo-grid
        #pageGrid
        class="h-full"
        [data]="detailSuiviEncaissementService | async"
        [pageSize]="detailSuiviEncaissementService.state.take"
        [skip]="detailSuiviEncaissementService.state.skip"
        [sort]="detailSuiviEncaissementService.state.sort"
        [groupable]="false"
        portalsGridPersistance
        [pageable]="true"
        [scrollable]="'scrollable'"
        [resizable]="true"
        (dataStateChange)="dataStateChangeEncaissementCies($event)"
        [loading]="detailSuiviEncaissementService.isLoading">
        <ng-template kendoGridToolbarTemplate>
          <kendo-grid-column-chooser></kendo-grid-column-chooser>
          @if(hasAccess()){
          <button
            (click)="exportDetailEncaissements()"
            class="k-button"
            [svgIcon]="fileExcelIcon"
            [disabled]="(isExporting | async) ?? false"
            kendoGridExcelCommand
            type="button">
            Exporter
          </button>
          }
        </ng-template>
        <kendo-grid-column
          [field]="'dateCreation'"
          [title]="'Date de Creation'"
          [width]="150">
          <ng-template
            kendoGridCellTemplate
            let-dataItem
            let-rowIndex="rowIndex">
            {{ dataItem.dateCreation | dateLong }}
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column
          [field]="'typeEncaissement'"
          [title]="'Type Encaissement'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'numCv'"
          [title]="'Numéro CV'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'montantCv'"
          [title]="'Montant CV'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'souscripteur'"
          [title]="'Souscripteur'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'statut'"
          [title]="'Statut'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'cie'"
          [title]="'Cie'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'numLot'"
          [title]="'Numéro de lot'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'dateCvPhysique'"
          [title]="'Date CV Physique'"
          [width]="150">
          <ng-template
            kendoGridCellTemplate
            let-dataItem
            let-rowIndex="rowIndex">
            {{ dataItem.dateCvPhysique | dateLong }}
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column
          [field]="'numLotPortail'"
          [title]="'Numéro de lot Portail'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'datePortailVirement'"
          [title]="'Date Portail Virement'"
          [width]="150">
          <ng-template
            kendoGridCellTemplate
            let-dataItem
            let-rowIndex="rowIndex">
            {{ dataItem.datePortailVirement | dateLong }}
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column
          [field]="'banque'"
          [title]="'Banque'"
          [sortable]="false"
          [filterable]="false"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'dateEncaissement'"
          [title]="'Date Encaissement'"
          [width]="150">
          <ng-template
            kendoGridCellTemplate
            let-dataItem
            let-rowIndex="rowIndex">
            {{ dataItem.dateEncaissement | dateLong }}
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column
          [field]="'refBordereauFinance'"
          [title]="'Ref Bordereau Finance'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'dateDepotFinance'"
          [title]="'Date Dépôt Finance'"
          [width]="150">
          <ng-template
            kendoGridCellTemplate
            let-dataItem
            let-rowIndex="rowIndex">
            {{ dataItem.dateDepotFinance | dateLong }}
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column
          [field]="'refBordereauBanque'"
          [title]="'Ref Bordereau Banque'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'dateDepotBanque'"
          [title]="'Date Dépôt Banque'"
          [width]="150">
          <ng-template
            kendoGridCellTemplate
            let-dataItem
            let-rowIndex="rowIndex">
            {{ dataItem.dateDepotBanque | dateLong }}
          </ng-template>
        </kendo-grid-column>
        <kendo-grid-column
          [field]="'firstTag'"
          [title]="'First Tag'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'secondTag'"
          [title]="'Second Tag'"
          [width]="150"></kendo-grid-column>
        <kendo-grid-column
          [field]="'thirdTag'"
          [title]="'Third Tag'"
          [width]="150"></kendo-grid-column>
      </kendo-grid>
    </kendo-tilelayout-item-body>
  </kendo-tilelayout-item>
</kendo-tilelayout>
