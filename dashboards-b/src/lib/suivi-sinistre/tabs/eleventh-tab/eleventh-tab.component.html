<kendo-tilelayout
  class="min-h-[80vh]"
  [resizable]="editMode"
  [reorderable]="editMode"
  [rowHeight]="'282px'"
  [columns]="12"
  [autoFlow]="'row'">
  @if(editMode || !hide[0].getValue()){
    <kendo-tilelayout-item
      [colSpan]="appMode()?.isCourtierMode ? 6 : 12"
      [rowSpan]="2">
      @if ({ text: 'REPARTITION PAR TYPE DE SOIN' }; as header) {
        <kendo-tilelayout-item-header
          class="flex justify-between items-center">
          {{ header.text }}
          @if (!editMode) {
            <button
              kendoButton
              [svgIcon]="fullscreenIcon"
            (click)="expandCard(graph1.dataContainer!, header.text)"></button>
          }
        </kendo-tilelayout-item-header>
      }
      <kendo-tilelayout-item-body>
        @if (editMode) {
          <button
            kendoButton
            style="position: absolute; top: 8px; right: 16px; z-index: 10"
            [iconClass]="hide[0].getValue() ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"
            (click)="hide[0].next(!hide[0].getValue())"
            >
            {{ hide[0].getValue() ? 'Afficher' : 'Masquer' }}
          </button>
        }
        <portals-pie-chart
          #graph1
          [data]="repartitionParTypeDeSoinPie"
        [isLoading]="repartitionParTypeDeSoinIsLoading"></portals-pie-chart>
      </kendo-tilelayout-item-body>
    </kendo-tilelayout-item>
  }
  @if((editMode || !hide[1].getValue()) && appMode()?.isCourtierMode){
    <kendo-tilelayout-item
      [colSpan]="6"
      [rowSpan]="2">
      @if ({ text: 'MONTANT MOYEN REMBOURSÉ PAR TYPE DE DOSSIER' }; as header) {
        <kendo-tilelayout-item-header
          class="flex justify-between items-center">
          {{ header.text }}
          @if (!editMode) {
            <button
              kendoButton
              [svgIcon]="fullscreenIcon"
            (click)="expandCard(graph2.dataContainer!, header.text)"></button>
          }
        </kendo-tilelayout-item-header>
      }
      <kendo-tilelayout-item-body>
        @if (editMode) {
          <button
            kendoButton
            style="position: absolute; top: 8px; right: 16px; z-index: 10"
            [iconClass]="hide[1].getValue() ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"
            (click)="hide[1].next(!hide[1].getValue())"
            >
            {{ hide[1].getValue() ? 'Afficher' : 'Masquer' }}
          </button>
        }
        <portals-graph-chart
          #graph2
          type="bar"
          class="h-full"
          [data]="montantMoyenRembourseParTypeDeDossierGraph"
        [isLoading]="montantMoyenRembourseParTypeDeDossierIsLoading"></portals-graph-chart>
      </kendo-tilelayout-item-body>
    </kendo-tilelayout-item>
  }

</kendo-tilelayout>
